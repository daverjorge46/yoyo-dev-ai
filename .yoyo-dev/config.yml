# Yoyo Dev Configuration

yoyo_dev_version: 5.0.0

agents:
  claude_code:
    enabled: true
  cursor:
    enabled: false

# Multi-agent workflow options
multi_agent:
  enabled: true
  use_workflow_references: true  # Enable {{workflows/*}} syntax

# Agent configurations (v5.0 Multi-Agent Orchestration)
agent_configs:
  # Primary model (all agents use this unless fallback triggered)
  default_model: anthropic/claude-opus-4-5

  # Fallback model (used when Opus unavailable or rate-limited)
  fallback_model: anthropic/claude-sonnet-4-5

  # Agent-specific configurations
  yoyo_ai:
    enabled: true
    temperature: 1.0
    tools: ["*"]  # All tools available
    fallback_on_rate_limit: true

  oracle:
    enabled: true
    temperature: 0.1
    tools:
      - "Read"
      - "Grep"
      - "Glob"
      - "call_agent"
      - "!Bash"      # Denied
      - "!Write"     # Denied
    fallback_on_rate_limit: true

  librarian:
    enabled: true
    temperature: 0.3
    tools:
      - "mcp__context7__*"
      - "mcp__websearch_exa__*"
      - "mcp__grep_app__*"
      - "mcp__MCP_DOCKER__search_*"
      - "mcp__MCP_DOCKER__get_*"
      - "mcp__MCP_DOCKER__list_*"
      - "Read"
      - "Grep"
      - "!Bash"
    prefer_fallback: true  # Use Sonnet by default (cost optimization)
    fallback_on_rate_limit: true

  explore:
    enabled: true
    temperature: 0.5
    tools:
      - "Grep"
      - "Glob"
      - "Read"
      - "!Write"
      - "!Bash"
    prefer_fallback: true  # Use Sonnet by default (speed optimization)
    fallback_on_rate_limit: true

  frontend_engineer:
    enabled: true
    temperature: 0.7
    tools:
      - "Write"
      - "Read"
      - "Edit"
      - "mcp__playwright__*"
      - "mcp__MCP_DOCKER__browser_*"
      - "!call_agent"  # Prevent delegation loops
    fallback_on_rate_limit: true

  document_writer:
    enabled: true
    temperature: 0.5
    tools:
      - "Write"
      - "Read"
      - "Edit"
      - "!Bash"
    prefer_fallback: true  # Sonnet sufficient for prose
    fallback_on_rate_limit: true

# Background task configuration
background_tasks:
  enabled: true
  max_concurrent: 5
  polling_interval: 2000  # milliseconds
  idle_timeout: 300000    # 5 minutes
  notification:
    toast: true
    message_injection: true
  # Use fallback model for background tasks (cost optimization)
  prefer_fallback_for_background: true

# Model fallback strategy
model_fallback:
  enabled: true
  strategy: "graceful"  # graceful | immediate

  # Graceful: Retry with Opus once, then fallback to Sonnet
  # Immediate: Switch to Sonnet immediately on 429

  max_retries: 1
  retry_delay: 2000  # milliseconds

  # When to trigger fallback
  triggers:
    - rate_limit_error    # 429 Too Many Requests
    - quota_exceeded      # Monthly quota hit
    - timeout             # Request timeout

  # Cost optimization: use Sonnet for these scenarios
  use_fallback_for:
    - explore_agent       # Fast codebase search
    - document_writer     # Technical writing
    - background_tasks    # Non-critical parallel work

# Workflow preferences
workflows:
  task_execution:
    mode: automatic  # automatic (/execute-tasks) or orchestrated (/orchestrate-tasks)
    implementation_reports: false  # Create implementation/ folder
    verification_reports: true     # Create verification/ folder
    orchestrator: yoyo-ai  # or "legacy" for v4.0
    failure_recovery:
      enabled: true
      max_attempts: 3
      escalate_to: oracle
    frontend_delegation:
      enabled: true
      agent: frontend-engineer
    todo_continuation:
      enabled: true
      cooldown: 3000  # milliseconds

# Specialized Agents Configuration
specialized_agents:
  # Context and utility agents
  context_fetcher: true
  file_creator: true
  git_workflow: true
  project_manager: true
  test_runner: true
  date_checker: true

  # Design system agents
  design_analyzer: true
  design_validator: true

  # New workflow-based agents
  spec_initializer: true
  spec_shaper: true
  spec_writer: true
  tasks_list_creator: true
  implementer: true
  implementation_verifier: true
  product_planner: true

# Skills optimization
skills:
  auto_improve: false  # Automatically improve skills on updates
  optimization_report: true  # Create optimization reports

# Workflow system configuration
workflow_system:
  max_nesting_depth: 3  # Maximum workflow reference nesting
  cache_enabled: true   # Cache expanded workflows
  cache_size: 100       # Max workflows in cache

# Design System Configuration
design_system:
  enabled: true
  auto_validate: true
  accessibility_level: WCAG-AA  # WCAG-AA or WCAG-AAA
  dark_mode: true
  spacing_base: 4  # 4px or 8px
  strict_mode: false  # If true, blocks merge on any violation

# Split View Configuration
split_view:
  enabled: true                    # Master toggle for split view mode
  ratio: 0.5                       # Split ratio (0.0-1.0): 0.5 = 50% left, 50% right
  active_pane: claude              # Starting focus: "claude" or "tui"

  border_style:
    active: bright_cyan            # Active pane border color
    inactive: dim_white            # Inactive pane border color

  shortcuts:
    switch_focus: ctrl+b+arrow     # Switch pane focus
    resize_left: ctrl+b+<          # Make left pane larger
    resize_right: ctrl+b+>         # Make right pane larger

  claude:
    command: claude                # Command to launch Claude Code
    auto_cwd: true                 # Auto-attach to current directory
    fallback_delay: 3              # Seconds to wait before TUI-only fallback

# TUI enhancements (v5.0 Multi-Agent Orchestration)
tui:
  version: "v3"  # Options: "v3" (Python/Textual) or "v4" (TypeScript/Ink, stable)
  symbols:
    enabled: true
  event_streaming:
    enabled: true
    session_tags: true
  step_progress:
    enabled: true
  background_indicators:
    enabled: true

# Backend API for TUI v4 (TypeScript/Ink)
backend:
  enabled: true
  port: 3457
  host: "localhost"
  heartbeat_interval: 30000  # milliseconds

# Cost tracking (v5.0 Multi-Agent Orchestration)
cost_tracking:
  enabled: true
  log_file: .yoyo-dev/logs/model-usage.jsonl
  report_interval: daily

  # Model pricing (adjust as needed)
  pricing:
    opus:
      input: 0.015   # per 1K tokens
      output: 0.075  # per 1K tokens
    sonnet:
      input: 0.003   # per 1K tokens
      output: 0.015  # per 1K tokens

# GUI Configuration
gui:
  enabled: true                    # Launch browser GUI with yoyo command
  port: 3456                       # GUI server port
  auto_open_browser: false         # Don't auto-open browser (user preference)
  dev_mode: false                  # Use production mode by default

# Parallel Execution Configuration
parallel_execution:
  enabled: true              # Auto-analyze task dependencies
  max_concurrency: 5         # Max parallel tasks
  auto_analyze: true         # Automatic dependency detection
  ask_confirmation: true     # Ask before parallel execution

project_types:
  default:
    instructions: ~/.yoyo-dev/instructions
    standards: ~/.yoyo-dev/standards

  # type_a:
  #   instructions: ~/.yoyo-dev/project_types/type_a/instructions
  #   standards: ~/.yoyo-dev/project_types/type_a/standards

  # type_b:
  #   instructions: ~/.yoyo-dev/project_types/type_b/instructions
  #   standards: ~/.yoyo-dev/project_types/type_b/standards

default_project_type: default