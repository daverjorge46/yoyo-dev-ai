/* JetBrains Mono - Terminal Font */
@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* =============================================================================
   Base Styles - Terminal Theme
   ============================================================================= */

@layer base {
  html {
    font-family: 'JetBrains Mono', monospace;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    @apply bg-neutral-50 dark:bg-terminal-bg text-gray-900 dark:text-terminal-text;
    font-feature-settings: 'liga' 1, 'calt' 1;
  }

  /* Improved scrollbar for terminal feel */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-gray-100 dark:bg-terminal-black;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-gray-300 dark:bg-terminal-border rounded;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-gray-400 dark:bg-terminal-border-emphasis;
  }

  /* Firefox scrollbar */
  * {
    scrollbar-width: thin;
    scrollbar-color: theme('colors.terminal.border') theme('colors.terminal.black');
  }
}

/* =============================================================================
   Component Classes - Terminal Style
   ============================================================================= */

@layer components {
  /* Terminal Card - Main container component */
  .terminal-card {
    @apply bg-white dark:bg-terminal-card
           border border-gray-200 dark:border-terminal-border
           rounded transition-all duration-fast;
  }

  .terminal-card-hover {
    @apply terminal-card hover:border-gray-300 dark:hover:border-terminal-border-emphasis
           hover:shadow-md cursor-pointer;
  }

  .terminal-card-interactive {
    @apply terminal-card-hover active:scale-[0.99];
  }

  /* Terminal Input */
  .terminal-input {
    @apply w-full px-3 py-2
           bg-white dark:bg-terminal-black
           border border-gray-300 dark:border-terminal-border
           rounded text-sm font-mono
           text-gray-900 dark:text-terminal-text
           placeholder:text-gray-400 dark:placeholder:text-terminal-text-muted
           focus:outline-none focus:border-brand dark:focus:border-brand
           focus:ring-1 focus:ring-brand/30
           transition-colors duration-fast;
  }

  /* Terminal Button Variants */
  .terminal-btn {
    @apply inline-flex items-center justify-center gap-2
           px-3 py-1.5 rounded text-sm font-medium
           transition-all duration-fast
           focus:outline-none focus:ring-2 focus:ring-offset-2
           dark:focus:ring-offset-terminal-bg
           disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .terminal-btn-primary {
    @apply terminal-btn
           bg-brand text-terminal-black
           hover:bg-brand-light active:bg-brand-dark
           focus:ring-brand;
  }

  .terminal-btn-secondary {
    @apply terminal-btn
           bg-gray-100 dark:bg-terminal-elevated text-gray-700 dark:text-terminal-text
           border border-gray-300 dark:border-terminal-border
           hover:bg-gray-200 dark:hover:bg-terminal-border-subtle
           focus:ring-gray-400;
  }

  .terminal-btn-ghost {
    @apply terminal-btn
           text-gray-600 dark:text-terminal-text-secondary
           hover:bg-gray-100 dark:hover:bg-terminal-elevated
           focus:ring-gray-400;
  }

  .terminal-btn-danger {
    @apply terminal-btn
           bg-error text-white
           hover:bg-error-dark active:bg-error-dark
           focus:ring-error;
  }

  /* Terminal Status Badges */
  .terminal-badge {
    @apply inline-flex items-center gap-1 px-2 py-0.5
           rounded text-xs font-medium
           border;
  }

  .terminal-badge-success {
    @apply terminal-badge
           bg-success/10 text-success border-success/30
           dark:bg-terminal-green/10 dark:text-terminal-green dark:border-terminal-green/30;
  }

  .terminal-badge-warning {
    @apply terminal-badge
           bg-warning/10 text-warning-dark border-warning/30
           dark:bg-terminal-yellow/10 dark:text-terminal-yellow dark:border-terminal-yellow/30;
  }

  .terminal-badge-error {
    @apply terminal-badge
           bg-error/10 text-error border-error/30
           dark:bg-terminal-red/10 dark:text-terminal-red dark:border-terminal-red/30;
  }

  .terminal-badge-info {
    @apply terminal-badge
           bg-info/10 text-info border-info/30
           dark:bg-terminal-blue/10 dark:text-terminal-blue dark:border-terminal-blue/30;
  }

  .terminal-badge-neutral {
    @apply terminal-badge
           bg-gray-100 text-gray-600 border-gray-200
           dark:bg-terminal-elevated dark:text-terminal-text-secondary dark:border-terminal-border;
  }

  /* Terminal Progress Bar */
  .terminal-progress {
    @apply w-full h-1.5 bg-gray-200 dark:bg-terminal-border rounded-full overflow-hidden;
  }

  .terminal-progress-bar {
    @apply h-full rounded-full transition-all duration-slow;
  }

  /* Terminal Section Header */
  .terminal-header {
    @apply flex items-center gap-2 text-xs font-medium uppercase tracking-wider
           text-gray-500 dark:text-terminal-text-muted
           mb-3;
  }

  .terminal-header::before {
    content: '>';
    @apply text-brand;
  }

  /* Terminal Stat Display */
  .terminal-stat {
    @apply font-mono text-2xl font-semibold
           text-gray-900 dark:text-terminal-text;
  }

  .terminal-stat-label {
    @apply text-xs text-gray-500 dark:text-terminal-text-muted uppercase tracking-wide;
  }

  /* Terminal Code Block */
  .terminal-code {
    @apply px-1.5 py-0.5 rounded text-xs font-mono
           bg-gray-100 dark:bg-terminal-elevated
           text-gray-700 dark:text-terminal-text-secondary
           border border-gray-200 dark:border-terminal-border-subtle;
  }

  /* Terminal Link */
  .terminal-link {
    @apply text-brand hover:text-brand-light
           underline underline-offset-2 decoration-brand/30
           hover:decoration-brand transition-colors duration-fast;
  }

  /* Terminal Divider */
  .terminal-divider {
    @apply border-t border-gray-200 dark:border-terminal-border;
  }

  /* Legacy badge classes (for backward compatibility) */
  .badge {
    @apply terminal-badge;
  }
  .badge-success {
    @apply terminal-badge-success;
  }
  .badge-warning {
    @apply terminal-badge-warning;
  }
  .badge-error {
    @apply terminal-badge-error;
  }
  .badge-info {
    @apply terminal-badge-info;
  }
  .badge-neutral {
    @apply terminal-badge-neutral;
  }

  /* Legacy card classes */
  .card-hover {
    @apply terminal-card-hover;
  }
  .card-interactive {
    @apply terminal-card-interactive;
  }
}

/* =============================================================================
   Utility Classes
   ============================================================================= */

@layer utilities {
  /* Text colors with terminal semantics */
  .text-terminal-success {
    @apply text-success dark:text-terminal-green;
  }
  .text-terminal-warning {
    @apply text-warning-dark dark:text-terminal-yellow;
  }
  .text-terminal-error {
    @apply text-error dark:text-terminal-red;
  }
  .text-terminal-info {
    @apply text-info dark:text-terminal-blue;
  }

  /* Terminal prompt prefix */
  .terminal-prompt::before {
    content: '$ ';
    @apply text-brand font-bold;
  }

  /* Cursor blink effect */
  .terminal-cursor::after {
    content: '_';
    @apply animate-cursor-blink text-brand;
  }

  /* Line clamp utilities */
  .line-clamp-1 {
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Glow effects */
  .glow-brand {
    @apply shadow-glow-brand;
  }
  .glow-success {
    @apply shadow-glow-success;
  }
  .glow-error {
    @apply shadow-glow-error;
  }

  /* Smooth transitions */
  .transition-smooth {
    @apply transition-all duration-150 ease-out;
  }
}

/* =============================================================================
   Accessibility
   ============================================================================= */

/* Focus visible outlines - brand colored */
:focus-visible {
  @apply outline-2 outline-offset-2 outline-brand;
  outline-style: solid;
}

:focus:not(:focus-visible) {
  outline: none;
}

/* High contrast focus for interactive elements */
button:focus-visible,
a:focus-visible,
[role="button"]:focus-visible {
  @apply ring-2 ring-brand ring-offset-2 dark:ring-offset-terminal-bg;
}

/* Skip link for keyboard navigation */
.skip-link {
  @apply sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4
         focus:z-50 focus:px-4 focus:py-2 focus:bg-brand focus:text-terminal-black
         focus:rounded focus:shadow-lg font-medium;
}

/* Minimum touch target size */
button,
[role="button"],
a,
input[type="checkbox"],
input[type="radio"] {
  min-height: 36px;
  min-width: 36px;
}

/* Exception for inline buttons */
.btn-inline {
  min-height: auto;
  min-width: auto;
}

/* Reduce motion for users who prefer it */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .terminal-badge,
  .terminal-card {
    border-width: 2px;
  }
}

/* =============================================================================
   Loading States
   ============================================================================= */

/* Skeleton shimmer effect - terminal style */
@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

.skeleton-shimmer {
  background: linear-gradient(
    90deg,
    theme('colors.gray.200') 0%,
    theme('colors.gray.100') 50%,
    theme('colors.gray.200') 100%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

.dark .skeleton-shimmer {
  background: linear-gradient(
    90deg,
    theme('colors.terminal.card') 0%,
    theme('colors.terminal.elevated') 50%,
    theme('colors.terminal.card') 100%
  );
  background-size: 200% 100%;
}

/* =============================================================================
   Animations
   ============================================================================= */

/* Progress bar animation */
@keyframes progressPulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.7;
  }
}

.animate-progress {
  animation: progressPulse 2s ease-in-out infinite;
}
